<html>
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="js/leaflet.js"></script>
	<script src="js/coords.js"></script>
	<script src="js/leaflet.hotline.js"></script>
	<script src="js/yandex.js"></script>
	<script src="https://unpkg.com/leaflet-kmz@latest/dist/leaflet-kmz.js"></script>
	<script type="text/javascript">
		/*
			$(document).ready(function() {
				[
					'https://api-maps.yandex.ru/2.0/?load=package.map&lang=ru_RU'
					// 'https://api-maps.yandex.ru/2.0/?load=package.standard&lang=ru-RU'
					// 'https://api-maps.yandex.ru/2.0/?load=package.full&lang=ru-RU'
				].forEach(function(src) {
					setTimeout(function() {
						var script = document.createElement('script');
						script.src = src;
						script.async = false;
						document.head.appendChild(script);
					}, 1000);
				});
			});
		*/
	</script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css" />
	<style>		
		body { padding: 0 0 0 0; margin: 0px; }
		#map {width: 100%; height: 100%; padding: 0px; margin: 0px; }
		#top {width: 400px; height:24px; position: absolute; left: 70px; top: 8px; z-index: 1001; font-weight: bold; }
	</style>
</head>
<body>
	<div id="map"></div>
	<div id="top">
		<a href="Boguchar.html">Boguchar</a> | 
		<a href="Djubga.html">Djubga</a>
	</div>
	<script>
		var tiles = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png');
		var map = L.map('map', {layers: [tiles], scrollWheelZoom: true, dragging: true, tap: false });		
		map.setView(new L.LatLng(50.55,37.55), 8);		
		
		var osmgerman = L.tileLayer('http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', { maxZoom: 17, attribution: 'Maps &copy; <a href="http://openstreetmap.org">OSM</a>', subdomains: ['a','b','c'] });		
		var osmhot = L.tileLayer('http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', { maxZoom: 17, attribution: 'Maps &copy; <a href="http://openstreetmap.org">OSM</a>', subdomains: ['a','b','c'] });		
		var opentopo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', { maxZoom: 17, opacity: 1});
		var cyclemap = L.tileLayer('https://{s}.tile.hosted.thunderforest.com/cycle/{z}/{x}/{y}.png', { maxZoom: 17, opacity: 1});
		var mtbmap = L.tileLayer('https://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png', { maxZoom: 17, opacity: 1});
		var outdoor = L.tileLayer('https://a.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png', { maxZoom: 17, opacity: 1});
		var dvagis = L.tileLayer('https://tile{s}.maps.2gis.com/tiles?x={x}&y={y}&z={z}&v=1.1', { maxZoom: 18, subdomains: ['0','1','2','3'] });			
		var thunderforest = L.tileLayer('https://a.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png', { maxZoom: 18, subdomains: ['a','b','c'] });	
		
		var osmWikiMapTiles = L.tileLayer('', { maxZoom: 17, attribution: 'Maps &copy; WikiMapia' });
		osmWikiMapTiles.getTileUrl = function (tilePoint, zoom) { return "http://i" + ((tilePoint.x % 4) + (tilePoint.y % 4)*4) + ".wikimapia.org/?lng=1&" + 'x=' + tilePoint.x + '&y='+tilePoint.y+'&zoom='+tilePoint.z; };
		
		var GoogleMapLayer = new L.TileLayer('http://{s}.google.com/vt/lyrs=m@177000000&hl=ru&src=app&x={x}&s=&y={y}&z={z}&s=Ga', {attribution: 'Data, imagery and map information provided by <a href="http://maps.google.com" target="_blank">Google</a>', maxZoom: 19, subdomains: ['mts0','mts1'], zIndex: 2});
		var GoogleMapOverlayLayer = new L.TileLayer('http://{s}.google.com/vt/lyrs=h@177000000&hl=ru&src=app&x={x}&s=&y={y}&z={z}&s=G', {attribution: 'Data, imagery and map information provided by <a href="http://maps.google.com" target="_blank">Google</a>', maxZoom: 19, subdomains: ['mts0','mts1'], zIndex: 4});
		var GoogleTrafficLayer = new L.TileLayer('http://{s}.google.com/vt?hl=ru&src=app&lyrs=m@177000000,traffic|seconds_into_week:-1&x={x}&s=&y={y}&z={z}&style=15', {attribution: 'Traffic data provided by <a href="http://maps.google.com" target="_blank">Google</a>', maxZoom: 19, subdomains: ['mts0','mts1'], traffic: true, zIndex: 21});
		
		var ESRI = new L.TileLayer('https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}.png', { attribution: ' © <a href="https://www.arcgis.com/features/">ArcGIS</a>', lttype: 'ESRI' });
		var ESRISat = new L.TileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png', { attribution: ' © <a href="https://arcgisonline.com">ArcGIS</a>', lttype: 'ESRISat' });

		/*
		var yndx = new L.Yandex();
		var yndxS = new L.Yandex("satellite");
		var yndxH = new L.Yandex("hybrid");
		var yndxN = new L.Yandex("publicMap");
		var ytraffic = new L.Yandex("null", {traffic:true, opacity:0.8, overlay:true});
		*/
				
		var basemaps = {					
					  "OSM Mapnik": tiles, 
					  "OSM German Style": osmgerman, 
					  "OSM Hot Style": osmhot,
					  'OpenTopoMap': opentopo,
					  'OpenCycleMap': cyclemap,
					  'MTB': mtbmap,
					  'Outdoor': outdoor,
					  "2GIS": dvagis,
					  "ThunderForest": thunderforest,
					  "WikiMapia": osmWikiMapTiles,
					  "Google (Maps)": GoogleMapLayer,
					  /*
					  "Yandex (Maps)": yndxN,
					  "Yandex (Sattelite)": yndxS,
					  "Yandex (Hybrid)": yndxH,
					  */
					  'ArcGIS ESRI (Maps)': ESRI, 
					  'ArcGIS ESRI (Sattelite)': ESRISat, 
				  };
		var overlays = {
					  "Google (Hybrid)": GoogleMapOverlayLayer,
					  "Google (Traffic)": GoogleTrafficLayer,
					  /*
					  "Yandex (Traffic)": ytraffic,		
					  */
				  };
		L.control.layers(basemaps, overlays, { collapsed: true }).addTo(map);		
		var control = L.control.layers(null, null, { collapsed: false }).addTo(map);
				
		var kmz = L.kmzLayer().addTo(map); // https://github.com/Raruto/leaflet-kmz
		kmz.on('load', function(e) { map.fitBounds(e.layer.getBounds()); control.addOverlay(e.layer, '(KMZ) ' + e.name); });		
		
		try { var hash = window.location.hash.substr(1); if (hash != '') kmz.load('kmz/' + hash); } catch (e) {};
		
		// LOAD kmz
		kmz.load('kmz/Bike_Trips_2024.kmz');
		kmz.load('kmz/tracks.skif4x4.ru.kmz');
		kmz.load('kmz/Veloradar.kmz');
		kmz.load('kmz/gfisht.kmz');
		kmz.load('kmz/Shaumyan.kmz');
	</script>
</body>
</html>